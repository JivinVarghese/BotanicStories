{% extends 'base.html' %} {% block title %}User Registration{% endblock %}
{% block content %}
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">Register</h3>


                        <form method="POST" enctype="multipart/form-data" >
                            {% csrf_token %}
                            {% if user_form.non_field_errors or detail_form.non_field_errors %}
                            <div class="alert alert-danger mt-2">
                                {{ user_form.non_field_errors }}
                                {{ detail_form.non_field_errors }}
                            </div>
                            {% endif %}

                            <div class="form-group">
                                {{ user_form.username.as_widget }}
                                {% if user_form.username.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ user_form.username.errors }}
                                </div>
                                {% endif %}

                            </div>
                            <div class="form-group">
                                {{ user_form.email.as_widget }}
                                {% if user_form.email.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ user_form.email.errors }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="form-group position-relative">
                                {{ user_form.password.as_widget }}
                                {% if user_form.password.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ user_form.password.errors }}
                                </div>
                                {% endif %}
                                <a type="button" class="position-absolute" onclick="togglePassword(1)" id="togglePassword1"  style="right: 10px; top: 50%; transform: translateY(-50%);">
                                    Show
                                </a>
                            </div>
                            <div class="form-group position-relative" >
                                {{ user_form.confirm_password.as_widget }}
                                {% if user_form.confirm_password.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ user_form.confirm_password.errors }}
                                </div>
                                {% endif %}
                                <a type="button" class="position-absolute" onclick="togglePassword(2)" id="togglePassword2" style="right: 10px; top: 50%; transform: translateY(-50%);">
                                    Show
                                </a>
                            </div>
                            <div class="form-group">
                                {{ detail_form.bio.as_widget }}
                                {% if detail_form.bio.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ detail_form.bio.errors }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ detail_form.profile_pic.as_widget }}

                                {% if detail_form.profile_pic.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ detail_form.profile_pic.errors }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ detail_form.date_of_birth.as_widget }}
                                {% if detail_form.date_of_birth.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ detail_form.date_of_birth.errors }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ detail_form.location.as_widget }}

                                {% if detail_form.location.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ detail_form.location.errors }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ detail_form.interests.as_widget }}
                                {% if detail_form.interests.errors %}
                                <div class="alert alert-danger mt-2">
                                    {{ detail_form.interests.errors }}
                                </div>
                                {% endif %}
                            </div>

{#                            <div class="form-group">#}
{#                                {{ user_form.as_p }}#}
{#                                {{ detail_form.as_p }}#}
{#                            </div>#}
                            <p><a href="{% url 'login' %}">Login</a> if you have an account.</p>

                            <button class="btn btn-primary btn-block mt-2" type="submit">Register</button>
                        </form>
                        <script>
                            function togglePassword(field_num) {
                              let show_hide_link = document.getElementById(`togglePassword${field_num}`);
                              let password_field = field_num === 1 ? document.getElementById("id_password") : document.getElementById("id_confirm_password") ;
                              if (password_field.type === "password") {
                                password_field.type = "text"
                                show_hide_link.textContent = "Hide"
                              } else {
                                password_field.type = "password"
                                show_hide_link.textContent = "Show"
                              }
                            }
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
